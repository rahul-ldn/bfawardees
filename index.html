<!DOCTYPE html>
<html>
<head>
	
	<title>Belmont Forum Awardee Map</title>

	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">



<!-- Task list
1) Draw in data, construct data object
	CSV draw
	Interpret
2) render bars, map
	Pull logos
	add to nav bar
	render
3) render markers

4) respond to events

-->


<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css"
   integrity="sha512-07I2e+7D8p6he1SIM+1twR5TIrhUQn9+I6yjqD53JQjFiMf8EtC93ty0/5vJTZGF8aAocvHYNEDJajGdNx1IsQ=="
   crossorigin=""/>


  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>

<!--somewhere in CSS
#mapid { height: 180px; }
-->

	<script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"
   integrity="sha512-A7vV8IFfih/D732iSSKi20u/ooOfj/AGehOKq0f4vLT1Zr2Y+RX7C+w8A1gaSasGtRUZpF/NZgzSAu4/Gc41Lg=="
   crossorigin=""></script>


<!--- Stamen map tiles
<script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.3.0"></script> -->


  <!-- Load Papa Parse from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.2.0/papaparse.min.js"></script>

  <!-- Makimarkers -->
<script type="text/javascript" src="http://bfmembers.weareinquiry.com/bfawardees/Leaflet.MakiMarkers.js"></script>


</head>
<body>
2.5<br><br>


<!-- Create the map -->
<div id="mapid" style="width: 1000px; height: 500px; z-index: 90; text-align: center;"></div>
<script>

var mymap = L.map('mapid').setView([30.505, 0.09], 2);



L.tileLayer('https://api.mapbox.com/styles/v1/rslux/cj21r8qyp00002qmppuj0ivt6/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoicnNsdXgiLCJhIjoiY2oyMXFzd25jMDAwdDJ3cWFvYmk3NzYzaCJ9.b0CboYbGfrZTa1xApDdE5Q', {
		maxZoom: 18,
		attribution: 'ESRI ArcGIS',
		id: 'mapbox.streets'
	}).addTo(mymap);
//Notwithstanding ACAO/CORS, this executed

//CSV Import
//Drawing Markers
L.MakiMarkers.accessToken = "pk.eyJ1IjoicnNsdXgiLCJhIjoiY2oyMXFzd25jMDAwdDJ3cWFvYmk3NzYzaCJ9.b0CboYbGfrZTa1xApDdE5Q";

//**Second** CSV parseâ€”can this be refactored?
//Drawing Mountains
var mtnicon = L.MakiMarkers.icon({icon: "circle", color: "#a3276c", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Mountains.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: mtnicon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });
var arcicon = L.MakiMarkers.icon({icon: "circle", color: "#4bb5c5", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Arctic.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: arcicon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });

var bioicon = L.MakiMarkers.icon({icon: "circle", color: "#2c6733", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Biodiversity.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: bioicon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });

var climicon = L.MakiMarkers.icon({icon: "circle", color: "#cbbd2c", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Climate.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: climicon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });

var foodicon = L.MakiMarkers.icon({icon: "circle", color: "#ff7800", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Food-Security.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: foodicon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });

var coasticon = L.MakiMarkers.icon({icon: "circle", color: "#00ffA1", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Coastal.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: coasticon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });

var frshicon = L.MakiMarkers.icon({icon: "circle", color: "#098290", size: "m"});
Papa.parse("http://bfmembers.weareinquiry.com/bfawardees/Freshwater.csv", {
    download: true,
 //   header: true,
    complete: function(results) {
      console.log(results);

$.each(results.data, function(ib, el) {
if (ib != 0) {
  //Name  Acronym Affiliation City  Country Website Principal Principal's Representative  URL Logo Link Location  Latitude  Longitude
  var cra = ""
  var name = "";
  var affiliation = "";
  var city = "";
  var country = "";
  var email = "";
  var combinedlocation = "";
  var latitude = "";
  var longitude = "";
    $.each(el, function(j, cell) {
        if (j == 0) {cra = cell};
        if (j == 1) {name = cell};
        if (j == 2) {
            affiliation = cell;
//            if (affiliation == "Member") {
  //              markericon = "";
    //          } else {
      //          markericon = ""; //for partners
        //      }
            };

        if (j == 5) {email = cell};
        if (j == 6) {combinedlocation = cell};
        if (j == 7) {latitude = cell};
        if (j == 8) {longitude = cell};
  });

    var marker = L.marker([latitude, longitude], {icon: frshicon}).addTo(mymap)
              .bindPopup('<strong>'+name+'<br>'
                    +affiliation+'<br>'
                    +'CRA: '+cra+'<br>'
                    +
                    +'Location: '+combinedlocation+'<br>'
                    +"Email: "+email);

      
   
    }
  });
    }
  });

</script>


</body> </html>
